{"version":3,"sources":["../../src/pages/singleup/singleup.module.ts","../../src/pages/singleup/singleup.ts"],"names":[],"mappings":"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","file":"4.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { SingleupPage } from './singleup';\n\n@NgModule({\n  declarations: [\n    SingleupPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(SingleupPage),\n  ],\n})\nexport class SingleupPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/singleup/singleup.module.ts","import { Component, ViewChild, ElementRef } from '@angular/core';\nimport { IonicPage, NavController, NavParams, Platform } from 'ionic-angular';\nimport { Geolocation } from '@ionic-native/geolocation';\nimport { google } from 'google-maps';\n//import leaflet from 'leaflet';\n\ndeclare var google: any;\n/**\n * Generated class for the SingleupPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-singleup',\n  templateUrl: 'singleup.html',\n})\nexport class SingleupPage {\n  \n  @ViewChild('mymap') mapContainer: ElementRef;\n  map: any;\n  mymap:any;\n\n  markerGroup: any;\n  placesGroup: any;\n\n  gpsEnabled: boolean;\n\n\n  public UnidProd: any;\n\n  latOri: number;\n  lngOri: number;\n  latDest: number;\n  lngDest: number;\n\n\n  constructor(public navCtrl: NavController, \n              public navParams: NavParams,\n              public platform: Platform, \n              public geolocation: Geolocation,\n              ) {\n\n    this.UnidProd=this.navParams.get('up');\n\n    // POSIÇÂO ATUAL DO UTILIZADOR\n    this.platform.ready().then(() => {\n      this.geolocation.getCurrentPosition()\n        .then(result=>{\n          this.latOri = result.coords.latitude;\n          this.lngOri = result.coords.longitude;\n          this.latDest = this.UnidProd.strlatcent;\n          this.lngDest=this.UnidProd.strlngcent;\n          this.calcRota(this.latOri, this.lngOri, this.latDest, this.lngDest)\n          console.log(this.latOri);\n          console.log(this.lngOri);\n        })\n        .catch(err => console.log('geopositioning:', err));\n    })\n    //if (this.mymap == null){\n    //  this.loadmap();\n    //}\n    \n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad SingleupPage');\n  }\n\n\n  calcRota(latOri, lngOri, latDest, lngDest){ \n    // VARIÁVEL DO SERVIÇO DE DIREÇÃO (API) DO GOOGLE.\n    var directionService = new google.maps.DirectionsService;\n    // VÁRIAVEL PARA MOSTRAR (RENDERIZAR) A ROTA NO MAPA\n    var directionDisplay = new google.maps.DirectionsRenderer;\n\n    //VARIÁVEIS DE ORIGEM E DESTINO CONVERTIDAS E PREPARADAS EM ARRAY\n    var origem = {lat: parseFloat(latOri), lng: parseFloat(lngOri)};\n    var destino = {lat: parseFloat(latDest), lng: parseFloat(lngDest)};\n\n    //VARIÁVEIS COM OS ICONS DA LOCALIZAÇÃO\n    //var origemIcon = 'https://chart.googleapis.com/chart?chst=d_map_pin_letter&chld=O|FF0000|000000';\n    //var destinoIcon = 'https://chart.googleapis.com/chart?chst=d_map_pin_letter&chld=D|FFFF00|000000';\n   \n\n    //VARRIÁVEL DE LIMITES DA ROTA (UTILIZADOS NA APRESENTAÇÃO DAS ROTAS)\n    var bounds = new google.maps.LatLngBounds;\n\n    //VARIÁVEL QUE RENDERIZA O MAPA NO HTML\n    var map = new google.maps.Map(document.getElementById('mymap'),{\n      center: {lat: latOri, lng: lngOri},\n      zoom: 17\n    });\n\n    //SETAR O MAPA NO HTML\n    directionDisplay.setMap(map);\n\n    //VARIÁVEL DE GEOCODER DO GOOGLE\n    var geoCoder = new google.maps.Geocoder;\n\n    //VARIÁVEL QUE REALIZARÁ O CÁLCULO DA DISTÂNCIA ENTRE DOIS PONTOS\n    var service = new google.maps.DistanceMatrixService;\n\n    service.getDistanceMatrix({\n      origins: [origem],\n      destinations: [destino],\n      travelMode: 'DRIVING',\n      unitSystem: google.maps.UnitSystem.METRIC\n    },\n    function(response, status){\n      if (status !== 'OK') {\n        alert('Houve algum problema' + status)\n      }else{\n        //ARMAZENA O ENDEREÇO DE ORIGEM\n        var originList = response.originAddresses;\n        //ARMAZENA O ENDEREÇO DE DESTINO\n        var destinationList = response.destinationAddresses;\n\n        //ELEMENTO RESUTADO (DIV NO HTML) PARA DEMONSTRAR O RESULTADO\n        var resultado = document.getElementById('resultado');\n        resultado.innerHTML = '';\n\n        var showEnderecoOnMap = function(asDestination){\n          //var icon = asDestination ? destinoIcon : origemIcon;\n          return function(results,status){\n            if (status === 'OK') {\n              map.fitBounds(bounds.extend(results[0].geometry.location))\n            } else {\n              alert('Geocode Erro')\n            }\n          }\n        };\n\n        directionService.route({\n          origin:origem,\n          destination: destino,\n          travelMode: 'DRIVING'\n        }, function(response, status){\n          directionDisplay.setDirections(response);\n        });\n\n        for (let i = 0; i < originList.length; i++) {\n          var results = response.rows[i].elements;\n          geoCoder.geocode({'address' : originList[i]},\n                           showEnderecoOnMap(false))   \n                           \n        for (let j = 0; j < results.length; j++) {\n          geoCoder.geocode({'address':destinationList[j]},\n                            showEnderecoOnMap(true));\n                            \n          resultado.innerHTML += 'DE: ' + originList[i] + \"<br/>PARA: \" + destinationList[j] + \n                                 '<br/>DISTÂNCIA: ' + results[j].distance.text + ' em ' +\n                                 results[j].duration.text\n        }\n                        \n        }\n\n      }\n    })\n  \n  \n  \n  \n  }\n\n/*\n  loadmap() {\n    this.map = leaflet.map(\"mmap\").fitWorld();\n    leaflet.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}.png', {\n      attributions: 'Map data &copy; <a href=\"http://openstreetmap.org\">OpenStreetMap</a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>, Imagery © <a href=\"http://mapbox.com\">Mapbox</a>',\n      maxZoom: 18\n    }).addTo(this.map);\n  }\n\n  addPlaces() {\n    this.placesGroup = leaflet.featureGroup();\n    \n      let placeMarker = leaflet.marker(['-13', '-53']).on('click', () => {\n        var popup = leaflet.popup()\n              .setLatLng(['-13','-53'])\n              .setContent(`<h3>Título</h3>` + \n                          `<p>descrrição</p>`)\n              .openOn(this.map);\n        popup.openPopup();\n      });\n      this.placesGroup.addLayer(placeMarker);\n    \n    this.map.addLayer(this.placesGroup);\n  }\n*/\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/singleup/singleup.ts"],"sourceRoot":""}